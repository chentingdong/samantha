# Migration `20200618203416`

This migration has been generated by chentingdong at 6/18/2020, 8:34:16 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
ALTER TABLE "public"."Block" DROP COLUMN "actions",
ADD COLUMN "action" text  NOT NULL DEFAULT '',
ALTER COLUMN "state" SET DEFAULT 'DRAFT',
ALTER COLUMN "type" SET DEFAULT 'COMPOSITE_PARALLEL';

ALTER TABLE "public"."BlockDef" DROP COLUMN "actions",
ADD COLUMN "action" text  NOT NULL DEFAULT '',
ALTER COLUMN "type" SET DEFAULT 'COMPOSITE_PARALLEL';
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200617223005..20200618203416
--- datamodel.dml
+++ datamodel.dml
@@ -3,9 +3,9 @@
 }
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url      = env("DATABASE_URL")
 }
 enum State {
   DELETE
@@ -37,9 +37,9 @@
   type         BlockType @default(COMPOSITE_PARALLEL)
   state        State     @default(DRAFT)
   control      String    @default("{}")
   context      String    @default("{}")
-  actions      String    @default("[]")
+  action       String    @default("")
   // actions      String    @relation("blockAction", fields: [actionId], references: [id])
   parentId     String?   @map("parent")
   parent       Block?    @relation("parentChildren", fields: [parentId], references: [id])
   children     Block[]   @relation("parentChildren")
@@ -61,9 +61,9 @@
   description  String     @default("")
   type         BlockType  @default(COMPOSITE_PARALLEL)
   control      String     @default("{}")
   context      String     @default("{}")
-  actions      String     @default("[]")
+  action      String     @default("")
   parentId     String?    @map("parent")
   parent       BlockDef?  @relation("blockDefParentChildren", fields: [parentId], references: [id])
   children     BlockDef[] @relation("blockDefParentChildren")
   created_at   DateTime   @default(now())
```


