{
   "@id": "sid-0b0aaa25-3baf-4875-9d7a-0907d599a9ef",
   "@targetNamespace": "http://www.omg.org/spec/BPMN/20100524/MODEL",
   "@exporter": "Camunda Modeler",
   "@exporterVersion": "1.10.0",
   "@schemaLocation": "http://www.omg.org/spec/BPMN/20100524/MODEL BPMN20.xsd",
   "dataStore": {
      "@id": "FinancialAccountingSystem",
      "@name": "Financial Accounting System",
      "@isUnlimited": "false",
      "dataState": {
         "@id": "DataState_1"
      }
   },
   "message": {
      "@id": "foxMessage_en",
      "@name": "foxMessage_en"
   },
   "collaboration": {
      "@id": "collaboration_3",
      "participant": {
         "@id": "Process_Engine_1",
         "@name": "Invoice Receipt",
         "@processRef": "invoice"
      }
   },
   "process": {
      "@id": "invoice",
      "@name": "Invoice Receipt",
      "@isExecutable": "true",
      "@versionTag": "V2.0",
      "@historyTimeToLive": "45",
      "laneSet": {
         "@id": "laneSet_5",
         "lane": [
            {
               "@id": "Approver",
               "@name": "Approver",
               "flowNodeRef": [
                  "approveInvoice",
                  "invoice_approved"
               ]
            },
            {
               "@id": "teamAssistant",
               "@name": "Team Assistant",
               "flowNodeRef": [
                  "reviewSuccessful_gw",
                  "assignApprover",
                  "StartEvent_1",
                  "invoiceNotProcessed",
                  "reviewInvoice"
               ]
            },
            {
               "@id": "Accountant",
               "@name": "Accountant",
               "flowNodeRef": [
                  "prepareBankTransfer",
                  "invoiceProcessed",
                  "ServiceTask_1"
               ]
            }
         ]
      },
      "userTask": [
         {
            "@id": "approveInvoice",
            "@name": "Approve Invoice",
            "@formKey": "embedded:app:forms/approve-invoice.html",
            "@candidateGroups": "${approverGroups}",
            "@dueDate": "${dateTime().plusWeeks(1).toDate()}",
            "documentation": "Approve the invoice (or not).",
            "extensionElements": {
               "taskListener": [
                  {
                     "@event": "create",
                     "script": {
                        "@scriptFormat": "javascript",
                        "#text": "if(!!task.getVariable('approver')) {\n  task.setAssignee(approver);\n}"
                     }
                  },
                  {
                     "@event": "assignment",
                     "script": {
                        "@scriptFormat": "javascript",
                        "#text": "task.setVariable('approver', task.getAssignee());"
                     }
                  }
               ]
            },
            "incoming": [
               "sequenceFlow_178",
               "reviewSuccessful"
            ],
            "outgoing": "sequenceFlow_180"
         },
         {
            "@id": "prepareBankTransfer",
            "@name": "Prepare\nBank\nTransfer",
            "@formKey": "embedded:app:forms/prepare-bank-transfer.html",
            "@candidateGroups": "accounting",
            "@dueDate": "${dateTime().plusWeeks(1).toDate()}",
            "documentation": "Prepare the bank transfer.",
            "incoming": "invoiceApproved",
            "outgoing": "SequenceFlow_2"
         }
      ],
      "exclusiveGateway": [
         {
            "@id": "invoice_approved",
            "@name": "Invoice\napproved?",
            "@gatewayDirection": "Diverging",
            "incoming": "sequenceFlow_180",
            "outgoing": [
               "invoiceNotApproved",
               "invoiceApproved"
            ]
         },
         {
            "@id": "reviewSuccessful_gw",
            "@name": "Review\nsuccessful?",
            "@gatewayDirection": "Diverging",
            "incoming": "sequenceFlow_183",
            "outgoing": [
               "reviewNotSuccessful",
               "reviewSuccessful"
            ]
         }
      ],
      "sequenceFlow": [
         {
            "@id": "invoiceNotApproved",
            "@name": "no",
            "@isImmediate": "true",
            "@sourceRef": "invoice_approved",
            "@targetRef": "reviewInvoice",
            "conditionExpression": {
               "@type": "tFormalExpression",
               "@id": "conditionExpression_56",
               "#text": "${!approved}"
            }
         },
         {
            "@id": "sequenceFlow_180",
            "@isImmediate": "true",
            "@sourceRef": "approveInvoice",
            "@targetRef": "invoice_approved"
         },
         {
            "@id": "sequenceFlow_183",
            "@isImmediate": "true",
            "@sourceRef": "reviewInvoice",
            "@targetRef": "reviewSuccessful_gw"
         },
         {
            "@id": "invoiceApproved",
            "@name": "yes",
            "@isImmediate": "true",
            "@sourceRef": "invoice_approved",
            "@targetRef": "prepareBankTransfer",
            "conditionExpression": {
               "@type": "tFormalExpression",
               "@id": "conditionExpression_63",
               "#text": "${approved}"
            }
         },
         {
            "@id": "reviewNotSuccessful",
            "@name": "no",
            "@isImmediate": "true",
            "@sourceRef": "reviewSuccessful_gw",
            "@targetRef": "invoiceNotProcessed",
            "conditionExpression": {
               "@type": "tFormalExpression",
               "#text": "${!clarified}"
            }
         },
         {
            "@id": "reviewSuccessful",
            "@name": "yes",
            "@isImmediate": "true",
            "@sourceRef": "reviewSuccessful_gw",
            "@targetRef": "approveInvoice",
            "conditionExpression": {
               "@type": "tFormalExpression",
               "#text": "${clarified}"
            }
         },
         {
            "@id": "sequenceFlow_178",
            "@isImmediate": "true",
            "@sourceRef": "assignApprover",
            "@targetRef": "approveInvoice"
         },
         {
            "@id": "SequenceFlow_2",
            "@name": "",
            "@sourceRef": "prepareBankTransfer",
            "@targetRef": "ServiceTask_1"
         },
         {
            "@id": "SequenceFlow_1",
            "@name": "",
            "@sourceRef": "StartEvent_1",
            "@targetRef": "assignApprover"
         },
         {
            "@id": "SequenceFlow_3",
            "@name": "",
            "@sourceRef": "ServiceTask_1",
            "@targetRef": "invoiceProcessed"
         }
      ],
      "dataStoreReference": {
         "@id": "DataStoreReference_1",
         "@name": "Financial Accounting System",
         "@dataStoreRef": "FinancialAccountingSystem"
      },
      "businessRuleTask": {
         "@id": "assignApprover",
         "@name": "Assign Approver Group",
         "@resultVariable": "approverGroups",
         "@decisionRef": "invoice-assign-approver",
         "@mapDecisionResult": "collectEntries",
         "incoming": "SequenceFlow_1",
         "outgoing": "sequenceFlow_178"
      },
      "startEvent": {
         "@id": "StartEvent_1",
         "@name": "Invoice\nreceived",
         "@formKey": "embedded:app:forms/start-form.html",
         "outgoing": "SequenceFlow_1"
      },
      "endEvent": [
         {
            "@id": "invoiceNotProcessed",
            "@name": "Invoice not\nprocessed",
            "incoming": "reviewNotSuccessful"
         },
         {
            "@id": "invoiceProcessed",
            "@name": "Invoice\nprocessed",
            "incoming": "SequenceFlow_3"
         }
      ],
      "serviceTask": {
         "@id": "ServiceTask_1",
         "@name": "Archive Invoice",
         "@async": "true",
         "@class": "org.camunda.bpm.example.invoice.service.ArchiveInvoiceService",
         "incoming": "SequenceFlow_2",
         "outgoing": "SequenceFlow_3"
      },
      "callActivity": {
         "@id": "reviewInvoice",
         "@name": "Review Invoice",
         "@caseRef": "ReviewInvoiceCase",
         "extensionElements": {
            "in": [
               {
                  "@source": "invoiceDocument",
                  "@target": "invoiceDocument"
               },
               {
                  "@source": "creditor",
                  "@target": "creditor"
               },
               {
                  "@source": "amount",
                  "@target": "amount"
               },
               {
                  "@source": "invoiceCategory",
                  "@target": "invoiceCategory"
               },
               {
                  "@source": "invoiceNumber",
                  "@target": "invoiceNumber"
               }
            ],
            "out": {
               "@source": "clarified",
               "@target": "clarified"
            }
         },
         "incoming": "invoiceNotApproved",
         "outgoing": "sequenceFlow_183"
      },
      "association": {
         "@id": "Association_1",
         "@sourceRef": "DataStoreReference_1",
         "@targetRef": "prepareBankTransfer"
      }
   },
   "BPMNDiagram": {
      "@id": "BPMNDiagram_73",
      "BPMNPlane": {
         "@id": "BPMNPlane_73",
         "@bpmnElement": "collaboration_3",
         "BPMNShape": [
            {
               "@id": "Process_Engine_1_gui",
               "@bpmnElement": "Process_Engine_1",
               "@isHorizontal": "true",
               "Bounds": {
                  "@x": "0",
                  "@y": "0",
                  "@width": "1009",
                  "@height": "486"
               }
            },
            {
               "@id": "Freigebender_105_gui",
               "@bpmnElement": "Approver",
               "@isHorizontal": "true",
               "Bounds": {
                  "@x": "30",
                  "@y": "182",
                  "@width": "979",
                  "@height": "161"
               }
            },
            {
               "@id": "Team-Assistenz_110_gui",
               "@bpmnElement": "teamAssistant",
               "@isHorizontal": "true",
               "Bounds": {
                  "@x": "30",
                  "@y": "0",
                  "@width": "979",
                  "@height": "183"
               }
            },
            {
               "@id": "Buchhaltung_119_gui",
               "@bpmnElement": "Accountant",
               "@isHorizontal": "true",
               "Bounds": {
                  "@x": "30",
                  "@y": "342",
                  "@width": "979",
                  "@height": "144"
               }
            },
            {
               "@id": "Rechnung_freigeben_125_gui",
               "@bpmnElement": "approveInvoice",
               "@isHorizontal": "true",
               "Bounds": {
                  "@x": "353",
                  "@y": "224",
                  "@width": "100",
                  "@height": "80"
               }
            },
            {
               "@id": "Freigabe_erfolgt__131_gui",
               "@bpmnElement": "invoice_approved",
               "@isHorizontal": "true",
               "@isMarkerVisible": "true",
               "Bounds": {
                  "@x": "488",
                  "@y": "244",
                  "@width": "40",
                  "@height": "40"
               },
               "BPMNLabel": {
                  "Bounds": {
                     "@x": "455",
                     "@y": "289",
                     "@width": "107",
                     "@height": "22"
                  }
               }
            },
            {
               "@id": "Freigebenden_zuordnen_143_gui",
               "@bpmnElement": "assignApprover",
               "@isHorizontal": "true",
               "Bounds": {
                  "@x": "180",
                  "@y": "52",
                  "@width": "100",
                  "@height": "80"
               }
            },
            {
               "@id": "Kl_rung_erfolgreich__153_gui",
               "@bpmnElement": "reviewSuccessful_gw",
               "@isHorizontal": "true",
               "@isMarkerVisible": "true",
               "Bounds": {
                  "@x": "693",
                  "@y": "72",
                  "@width": "40",
                  "@height": "40"
               },
               "BPMNLabel": {
                  "Bounds": {
                     "@x": "656",
                     "@y": "117",
                     "@width": "114",
                     "@height": "22"
                  }
               }
            },
            {
               "@id": "endEvent_165_gui",
               "@bpmnElement": "invoiceNotProcessed",
               "@isHorizontal": "true",
               "Bounds": {
                  "@x": "912",
                  "@y": "78",
                  "@width": "28",
                  "@height": "28"
               },
               "BPMNLabel": {
                  "Bounds": {
                     "@x": "861",
                     "@y": "111",
                     "@width": "131",
                     "@height": "22"
                  }
               }
            },
            {
               "@id": "zberweisung_vorbereiten_169_gui",
               "@bpmnElement": "prepareBankTransfer",
               "@isHorizontal": "true",
               "Bounds": {
                  "@x": "638",
                  "@y": "383",
                  "@width": "100",
                  "@height": "80"
               }
            },
            {
               "@id": "Rechnungseingang_abgearbeitet_174_gui",
               "@bpmnElement": "invoiceProcessed",
               "@isHorizontal": "true",
               "Bounds": {
                  "@x": "929",
                  "@y": "409",
                  "@width": "28",
                  "@height": "28"
               },
               "BPMNLabel": {
                  "Bounds": {
                     "@x": "889",
                     "@y": "442",
                     "@width": "109",
                     "@height": "22"
                  }
               }
            },
            {
               "@id": "DataStoreReference_1_gui",
               "@bpmnElement": "DataStoreReference_1",
               "@isHorizontal": "true",
               "Bounds": {
                  "@x": "574",
                  "@y": "516",
                  "@width": "63",
                  "@height": "61"
               },
               "BPMNLabel": {
                  "Bounds": {
                     "@x": "517",
                     "@y": "582",
                     "@width": "176",
                     "@height": "22"
                  }
               }
            },
            {
               "@id": "_BPMNShape_StartEvent_3",
               "@bpmnElement": "StartEvent_1",
               "Bounds": {
                  "@x": "96",
                  "@y": "78",
                  "@width": "28",
                  "@height": "28"
               },
               "BPMNLabel": {
                  "Bounds": {
                     "@x": "62",
                     "@y": "111",
                     "@width": "96",
                     "@height": "22"
                  }
               }
            },
            {
               "@id": "_BPMNShape_ServiceTask_2",
               "@bpmnElement": "ServiceTask_1",
               "Bounds": {
                  "@x": "780",
                  "@y": "383",
                  "@width": "100",
                  "@height": "80"
               }
            },
            {
               "@id": "Rechnung_kl_ren_148_gui",
               "@bpmnElement": "reviewInvoice",
               "Bounds": {
                  "@x": "548",
                  "@y": "52",
                  "@width": "100",
                  "@height": "80"
               }
            }
         ],
         "BPMNEdge": [
            {
               "@id": "Nein_182_gui",
               "@bpmnElement": "invoiceNotApproved",
               "@sourceElement": "Freigabe_erfolgt__131_gui",
               "@targetElement": "Rechnung_kl_ren_148_gui",
               "waypoint": [
                  {
                     "@type": "omgdc:Point",
                     "@x": "508",
                     "@y": "244"
                  },
                  {
                     "@type": "omgdc:Point",
                     "@x": "508",
                     "@y": "92"
                  },
                  {
                     "@type": "omgdc:Point",
                     "@x": "548",
                     "@y": "92"
                  }
               ],
               "BPMNLabel": {
                  "Bounds": {
                     "@x": "447",
                     "@y": "216",
                     "@width": "90",
                     "@height": "26"
                  }
               }
            },
            {
               "@id": "sequenceFlow_180_gui",
               "@bpmnElement": "sequenceFlow_180",
               "@sourceElement": "Rechnung_freigeben_125_gui",
               "@targetElement": "Freigabe_erfolgt__131_gui",
               "waypoint": [
                  {
                     "@type": "omgdc:Point",
                     "@x": "453",
                     "@y": "264"
                  },
                  {
                     "@type": "omgdc:Point",
                     "@x": "488",
                     "@y": "264"
                  }
               ],
               "BPMNLabel": {
                  "Bounds": {
                     "@x": "471",
                     "@y": "264",
                     "@width": "0",
                     "@height": "0"
                  }
               }
            },
            {
               "@id": "sequenceFlow_183_gui",
               "@bpmnElement": "sequenceFlow_183",
               "@sourceElement": "Rechnung_kl_ren_148_gui",
               "@targetElement": "Kl_rung_erfolgreich__153_gui",
               "waypoint": [
                  {
                     "@type": "omgdc:Point",
                     "@x": "648",
                     "@y": "92"
                  },
                  {
                     "@type": "omgdc:Point",
                     "@x": "693",
                     "@y": "92"
                  }
               ],
               "BPMNLabel": {
                  "Bounds": {
                     "@x": "625.5",
                     "@y": "77",
                     "@width": "90",
                     "@height": "0"
                  }
               }
            },
            {
               "@id": "sequenceFlow_178_gui",
               "@bpmnElement": "sequenceFlow_178",
               "@sourceElement": "Freigebenden_zuordnen_143_gui",
               "@targetElement": "Rechnung_freigeben_125_gui",
               "waypoint": [
                  {
                     "@type": "omgdc:Point",
                     "@x": "280",
                     "@y": "92"
                  },
                  {
                     "@type": "omgdc:Point",
                     "@x": "310",
                     "@y": "92"
                  },
                  {
                     "@type": "omgdc:Point",
                     "@x": "310",
                     "@y": "264"
                  },
                  {
                     "@type": "omgdc:Point",
                     "@x": "353",
                     "@y": "264"
                  }
               ],
               "BPMNLabel": {
                  "Bounds": {
                     "@x": "310",
                     "@y": "185",
                     "@width": "0",
                     "@height": "0"
                  }
               }
            },
            {
               "@id": "Association_1_gui",
               "@bpmnElement": "Association_1",
               "@sourceElement": "DataStoreReference_1_gui",
               "@targetElement": "zberweisung_vorbereiten_169_gui",
               "waypoint": [
                  {
                     "@type": "omgdc:Point",
                     "@x": "625",
                     "@y": "516"
                  },
                  {
                     "@type": "omgdc:Point",
                     "@x": "661",
                     "@y": "463"
                  }
               ]
            },
            {
               "@id": "Ja_181_gui",
               "@bpmnElement": "invoiceApproved",
               "@sourceElement": "Freigabe_erfolgt__131_gui",
               "@targetElement": "zberweisung_vorbereiten_169_gui",
               "waypoint": [
                  {
                     "@type": "omgdc:Point",
                     "@x": "528",
                     "@y": "264"
                  },
                  {
                     "@type": "omgdc:Point",
                     "@x": "587",
                     "@y": "264"
                  },
                  {
                     "@type": "omgdc:Point",
                     "@x": "587",
                     "@y": "423"
                  },
                  {
                     "@type": "omgdc:Point",
                     "@x": "638",
                     "@y": "423"
                  }
               ],
               "BPMNLabel": {
                  "Bounds": {
                     "@x": "540",
                     "@y": "237",
                     "@width": "32",
                     "@height": "26"
                  }
               }
            },
            {
               "@id": "nein_185_gui",
               "@bpmnElement": "reviewNotSuccessful",
               "@sourceElement": "Kl_rung_erfolgreich__153_gui",
               "@targetElement": "endEvent_165_gui",
               "waypoint": [
                  {
                     "@type": "omgdc:Point",
                     "@x": "733",
                     "@y": "92"
                  },
                  {
                     "@type": "omgdc:Point",
                     "@x": "912",
                     "@y": "92"
                  }
               ],
               "BPMNLabel": {
                  "Bounds": {
                     "@x": "744",
                     "@y": "91",
                     "@width": "24",
                     "@height": "26"
                  }
               }
            },
            {
               "@id": "ja_186_gui",
               "@bpmnElement": "reviewSuccessful",
               "@sourceElement": "Kl_rung_erfolgreich__153_gui",
               "@targetElement": "Rechnung_freigeben_125_gui",
               "waypoint": [
                  {
                     "@type": "omgdc:Point",
                     "@x": "713",
                     "@y": "72"
                  },
                  {
                     "@type": "omgdc:Point",
                     "@x": "713",
                     "@y": "35"
                  },
                  {
                     "@type": "omgdc:Point",
                     "@x": "403",
                     "@y": "35"
                  },
                  {
                     "@type": "omgdc:Point",
                     "@x": "403",
                     "@y": "224"
                  }
               ],
               "BPMNLabel": {
                  "Bounds": {
                     "@x": "720",
                     "@y": "36",
                     "@width": "32",
                     "@height": "26"
                  }
               }
            },
            {
               "@id": "BPMNEdge_SequenceFlow_1",
               "@bpmnElement": "SequenceFlow_2",
               "@sourceElement": "zberweisung_vorbereiten_169_gui",
               "@targetElement": "_BPMNShape_ServiceTask_2",
               "waypoint": [
                  {
                     "@type": "omgdc:Point",
                     "@x": "738",
                     "@y": "423"
                  },
                  {
                     "@type": "omgdc:Point",
                     "@x": "780",
                     "@y": "423"
                  }
               ],
               "BPMNLabel": {
                  "Bounds": {
                     "@x": "745",
                     "@y": "423",
                     "@width": "6",
                     "@height": "6"
                  }
               }
            },
            {
               "@id": "BPMNEdge_SequenceFlow_2",
               "@bpmnElement": "SequenceFlow_1",
               "@sourceElement": "_BPMNShape_StartEvent_3",
               "@targetElement": "Freigebenden_zuordnen_143_gui",
               "waypoint": [
                  {
                     "@type": "omgdc:Point",
                     "@x": "124",
                     "@y": "92"
                  },
                  {
                     "@type": "omgdc:Point",
                     "@x": "180",
                     "@y": "92"
                  }
               ]
            },
            {
               "@id": "BPMNEdge_SequenceFlow_3",
               "@bpmnElement": "SequenceFlow_3",
               "@sourceElement": "_BPMNShape_ServiceTask_2",
               "@targetElement": "Rechnungseingang_abgearbeitet_174_gui",
               "waypoint": [
                  {
                     "@type": "omgdc:Point",
                     "@x": "880",
                     "@y": "423"
                  },
                  {
                     "@type": "omgdc:Point",
                     "@x": "929",
                     "@y": "423"
                  }
               ],
               "BPMNLabel": {
                  "Bounds": {
                     "@x": "913",
                     "@y": "423",
                     "@width": "6",
                     "@height": "6"
                  }
               }
            }
         ]
      }
   }
}